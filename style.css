
:root { --bg:#001f3f; --card:#0b2a55; --ink:#fff; --muted:#bcd; --accent:#6ad1e3; }
* { box-sizing: border-box; }
html,body { margin:0; padding:0; background:var(--bg); color:var(--ink); font-family: system-ui, -apple-system, "Noto Sans JP", sans-serif; }
.site-header,.site-footer { padding: 16px; max-width: 1100px; margin: 0 auto; }
.site-header h1 { margin:0 0 8px; font-size: 20px; }
.actions { display:flex; gap:12px; align-items:center; }
button { border:0; background:var(--accent); color:#003; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
button:disabled { opacity:.5; cursor:not-allowed; }
.hint { color:var(--muted); }
main { max-width:1100px; margin: 0 auto; padding: 16px; }
/* カード：標準は2列、狭幅で1列 */
.cards { display:grid; grid-template-columns: repeat(2, minmax(260px,1fr)); gap:14px; }
@media (max-width: 1023px){
  .cards { grid-template-columns: 1fr; }
}
.card { background:var(--card); border-radius:14px; padding:16px; display:flex; flex-direction:column; gap:10px; }
.handle { font-weight:700; font-size:18px; word-break:break-all; }
.links { display:flex; gap:8px; flex-wrap:wrap; }
.links a, .links button { text-decoration:none; background:#fff; color:#111; padding:8px 10px; border-radius:8px; }
.links a:hover { filter:brightness(0.92); }
.muted { color:var(--muted); font-size:12px; }


/* === range toggle & chart (minimal) === */
.range-toggle { display:flex; gap:6px; margin-left:auto; }
.rt-btn { background:#123c6a; color:#fff; border-radius:8px; padding:8px 10px; }
.rt-btn.is-active { outline:2px solid var(--accent); background:#14508f; }
.chart { max-width:1100px; margin: 0 auto 8px; padding: 0 16px; }
#trend { width:100%; height:260px; display:block; background:linear-gradient(#0b2a55,#0b2a55) padding-box, 
          linear-gradient(transparent, rgba(255,255,255,.06)) border-box; border:1px solid rgba(255,255,255,.08); border-radius:12px; }

/* === follower count === */
.stats { font-size:13px; display:flex; gap:6px; align-items:baseline; }
.stats .count { font-weight:700; }
.stats .updated { color:var(--muted); font-size:11px; }

/* 改良: フォロワー数を大きく表示＋トグル対応 */
.stats .count {
  font-size: 30px;
  line-height: 1.2;
  cursor: pointer;
  transition: transform .3s ease, opacity .3s ease;
}
.stats .count.updated {
  transform: scale(1.12);
  opacity: 0.8;
}
.stats .delta {
  background: #14508f;
  border-radius: 6px;
  padding: 1px 6px;
  font-size: 12px;
  font-weight: 700;
  color: #fff;
}

/* 全店カードは固定 */
.cards .card[data-target="ALL"] {
  grid-column: span 2;
  position: sticky;
  top: 8px;
  z-index: 10;
}

/* 小型スパークライン */
.sparkline {
  width: 100%;
  height: 36px;
  display: block;
}


/* === chips (overlay toggle) === */
.chips { display:flex; flex-wrap:wrap; gap:6px; margin:6px 0; }
.chip { background:#234; color:#fff; padding:4px 8px; border-radius:6px; cursor:pointer; font-size:12px; }
.chip.active { background:var(--accent); color:#003; font-weight:700; }

/* === color legend swatch for chips === */
.chip .swatch{
  display:inline-block; width:10px; height:10px; border-radius:50%;
  margin-right:6px; vertical-align:middle; border:1px solid rgba(255,255,255,.35);
}

/* === 非表示：上部の合計チャート（将来の移設に備えDOMは残置） === */
.chart { display: none; }

/* === 全店合計カードは2列ぶんに拡大 === */
/* data属性 or 既存classどちらでも反応する冗長指定 */
.cards .card[data-target="ALL"],
.cards .card.all { grid-column: span 2; }

/* === 右ドロワー === */
.drawer{
  position: fixed; top:0; right:0; height:100vh; width: 420px;
  background: var(--card); color: var(--ink);
  box-shadow: -8px 0 24px rgba(0,0,0,.35);
  padding: 0; z-index: 50;
}
.drawer .drawer-panel{
  height:100%; padding:18px; overflow:auto;
  transform: translateX(100%); transition: transform .28s ease;
  will-change: transform;
}
.drawer.is-open .drawer-panel{ transform: translateX(0); }
.drawer.is-dragging .drawer-panel{ transition: none; }
@media (max-width: 1279px){
  .drawer{ width: min(100vw, 560px); }
}

/* 取っ手（常時表示） */
.drawer-handle{
  position: fixed; right: 0; top: 40%;
  width: 12px; height: 120px; cursor: ew-resize;
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
  border-left: 1px solid rgba(255,255,255,.12);
  border-top-left-radius: 10px; border-bottom-left-radius: 10px;
  z-index: 55;
}
.drawer-handle:focus-visible{ outline:2px solid var(--accent); }

.cards .card[data-target="ALL"] .count {
  font-size: 42px;
  font-weight: 800;
}
.cards .card[data-target="ALL"] .sparkline {
  height: 48px;
}

/* === v1: Insights summary & store === */
.insight-summary{
  display:grid; grid-template-columns: repeat(3, minmax(140px,1fr)) auto;
  gap:10px; align-items:center; margin: 4px 0 12px;
}
.insight-card{
  background: var(--card); border-radius:12px; padding:12px 14px;
  display:flex; flex-direction:column; gap:4px; min-height:64px;
}
.insight-card .metric{ font-size:12px; color:var(--muted); }
.insight-card .value{ font-size:24px; font-weight:800; }
.store-control{ justify-self:end; display:flex; align-items:center; gap:8px; }
.store-control select{ padding:8px 10px; border-radius:8px; background:#123c6a; color:#fff; border:1px solid rgba(255,255,255,.15); }

.insight-store{
  display:grid; grid-template-columns: repeat(3, minmax(220px,1fr)); gap:10px; margin: 0 0 8px;
}
.spark-mini{ width:100%; height:56px; display:block; background:#0b2a55; border:1px solid rgba(255,255,255,.08); border-radius:10px; }

/* === drawer for insights === */
.drawer-insight{
  position: fixed; top:0; right:0; height:100vh; width: 420px;
  background: var(--card); color: var(--ink);
  box-shadow: -8px 0 24px rgba(0,0,0,.35);
  padding: 0; z-index: 55;
}
.drawer-insight .drawer-panel{
  height:100%; padding:18px; overflow:auto;
  transform: translateX(100%); transition: transform .28s ease;
  will-change: transform;
}
.drawer-insight.is-open .drawer-panel{ transform: translateX(0); }
.drawer-insight.is-dragging .drawer-panel{ transition: none; }
.drawer-insight .table{ width:100%; border-collapse: collapse; }
.drawer-insight .table th,.drawer-insight .table td{ border-bottom:1px solid rgba(255,255,255,.12); padding:8px; text-align:right; }
.drawer-insight .table th:first-child,.drawer-insight .table td:first-child{ text-align:left; }

/* 引き出し用の取っ手（右端に常時表示） */
.drawer-handle{
  position: fixed; right: 0; top: 40%;
  width: 12px; height: 120px; cursor: ew-resize;
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
  border-left: 1px solid rgba(255,255,255,.12);
  border-top-left-radius: 10px; border-bottom-left-radius: 10px;
  z-index: 56;
}
.drawer-handle:focus-visible{ outline:2px solid var(--accent); }
