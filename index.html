<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ASOBLE Instagram Multi-View</title>
　<link rel="icon" href="data:,">
  <!-- cache-bust: CSS を確実に更新 -->
  <link rel="stylesheet" href="./style.css?v=2">
</head>
<body>
  <header class="site-header">
    <h1>ASOBLE Instagram アカウント一覧</h1>
    <div class="actions">
      <button id="open-all" title="すべて新規タブで開く">すべて開く</button>
      <button id="refresh" title="最新のデータを読み直す">最新に更新</button>
      <small class="hint">※ブラウザのポップアップブロックを解除してください</small>
       <div class="range-toggle" role="group" aria-label="期間切替">
        <button type="button" data-range="1h" class="rt-btn is-active">1時間</button>
        <button type="button" data-range="1d" class="rt-btn">1日</button>
        <button type="button" data-range="1m" class="rt-btn">月間</button>
      </div>
    </div>
  </header>
  <main>
    <!-- === v1: Insights summary & store selector === -->
    <section id="summary-insight" class="insight-summary" aria-live="polite">
      <article class="insight-card">
        <div class="metric">Posts</div>
        <div class="value" id="summary-posts">0</div>
      </article>
      <article class="insight-card">
        <div class="metric">Reels</div>
        <div class="value" id="summary-reels">0</div>
      </article>
      <article class="insight-card">
        <div class="metric">Stories</div>
        <div class="value" id="summary-stories">0</div>
      </article>
      <div class="store-control">
        <label for="storeSelect">店舗</label>
        <select id="storeSelect" aria-label="店舗選択">
          <!-- JSで ALL / KITAKYUSHU / HONAMI / IRISO / OHTU / YUMEGAOKA を挿入（相模原は除外） -->
        </select>
      </div>
    </section>

    <!-- 選択店舗：過去N日（例:14日）スパークライン（posts/reels/stories） -->
    <section id="store-insight" class="insight-store" aria-live="polite">
      <canvas id="spark-posts"   class="spark-mini" width="360" height="56"></canvas>
      <canvas id="spark-reels"   class="spark-mini" width="360" height="56"></canvas>
      <canvas id="spark-stories" class="spark-mini" width="360" height="56"></canvas>
    </section>
    <section id="chart" class="chart" aria-live="polite">
      <canvas id="trend" width="1024" height="260"></canvas>
      <div id="chips" class="chips"></div>
    </section>
    <!-- 全店合計カードは固定表示 -->
    <section id="cards" class="cards" aria-live="polite" style="position:relative;"></section>    
  </main>
  <!-- 右ドロワー（当日/前日の内訳テーブル） - 取っ手常時表示＋中身のみスライド -->
  <aside id="insightDrawer" class="drawer-insight" hidden aria-live="polite">
    <div class="drawer-panel">
      <div class="drawer-content"></div>
    </div>
    <div class="drawer-handle" role="button" tabindex="0" aria-label="引き出す"></div>
  </aside>
  <!-- 右ドロワー（カード選択時に詳細を表示） -->
  <aside id="dashboard" class="drawer" hidden aria-live="polite"></aside>
  <footer class="site-footer">
    <small>今後の追加は <code>accounts.json</code> にハンドルを追記してください。</small>
  </footer>
   <!-- cache-bust: 強制的に最新版の script.js を読ませる -->
  <!-- 改良版UI -->
  <script type="module" src="./script.js?v=5"></script>
  <noscript>JavaScript を有効にしてください。</noscript>
</body>
</html>
